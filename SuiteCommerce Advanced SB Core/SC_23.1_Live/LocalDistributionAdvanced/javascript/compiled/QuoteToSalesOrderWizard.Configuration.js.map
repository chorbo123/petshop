{"version":3,"sources":["QuoteToSalesOrderWizard.Configuration.ts"],"names":[],"mappings":"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","file":"QuoteToSalesOrderWizard.Configuration.js","sourcesContent":["/*\n\tÂ© 2020 NetSuite Inc.\n\tUser may not copy, modify, distribute, or re-bundle or otherwise make available this code;\n\tprovided, however, if you are an authorized user with a NetSuite account or log-in, you\n\tmay use this code subject to the terms that govern your access and use.\n*/\n\n/// <amd-module name=\"QuoteToSalesOrderWizard.Configuration\"/>\n\nimport * as _ from 'underscore';\nimport * as Utils from '../../../Commons/Utilities/JavaScript/Utils';\nimport { Configuration } from '../../SCA/JavaScript/Configuration';\n\nimport * as jQuery from '../../../Commons/Core/JavaScript/jQuery';\nimport { isPaymentAuthenticationRequired } from '../../../Commons/CardHolderAuthentication/JavaScript/CardHolderAuthentication';\n\nimport OrderWizardModuleCartSummary = require('../../OrderWizard.Module.CartSummary/JavaScript/OrderWizard.Module.CartSummary');\nimport OrderWizardModuleShowShipments = require('../../OrderWizard.Module.Shipmethod/JavaScript/OrderWizard.Module.ShowShipments');\nimport OrderWizardModuleShowPayments = require('../../OrderWizard.Module.PaymentMethod/JavaScript/OrderWizard.Module.ShowPayments');\nimport OrderWizardModuleTermsAndConditions = require('../../OrderWizard.Module.TermsAndConditions/JavaScript/OrderWizard.Module.TermsAndConditions');\nimport OrderWizardModuleSubmitButton = require('../../OrderWizard.Module.SubmitButton/JavaScript/OrderWizard.Module.SubmitButton');\nimport OrderWizardModulePaymentMethodCreditcard = require('../../OrderWizard.Module.PaymentMethod/JavaScript/OrderWizard.Module.PaymentMethod.Creditcard');\nimport OrderWizardModulePaymentMethodInvoice = require('../../OrderWizard.Module.PaymentMethod/JavaScript/OrderWizard.Module.PaymentMethod.Invoice');\n\nimport QuoteToSalesOrderWizardModuleQuoteDetails = require('../../QuoteToSalesOrderWizard/JavaScript/QuoteToSalesOrderWizard.Module.QuoteDetails');\nimport QuoteToSalesOrderWizardModuleConfirmation = require('../../QuoteToSalesOrderWizard/JavaScript/QuoteToSalesOrderWizard.Module.Confirmation');\nimport QuoteToSalesOrderWizardModulePaymentMethodSelector = require('../../QuoteToSalesOrderWizard/JavaScript/QuoteToSalesOrderWizard.Module.PaymentMethod.Selector');\nimport QuoteToSalesOrderWizardThreeDSecure = require('../../QuoteToSalesOrderWizard/JavaScript/QuoteToSalesOrderWizard.ThreeDSecure');\nimport HeaderView = require('../../Header/JavaScript/Header.View');\nimport QuoteToSalesOrderModuleAddressBilling = require('./QuoteToSalesOrder.Module.Address.Billing');\n\nexport type QuoteToSalesOrderWizardConfiguration = any;\nexport const QuoteToSalesOrderWizardConfiguration: any = {\n    steps: [\n        {\n            name: Utils.translate('Review your order').toUpperCase(),\n            steps: [\n                {\n                    url: 'quotetosalesorder-review',\n                    name: Utils.translate('Review Your Oder'),\n                    hideBackButton: true,\n                    hideContinueButton: false,\n                    continueButtonLabel: Utils.translate('Place Order'),\n                    hideBreadcrumb: true,\n                    showBottomMessage: true,\n                    modules: [\n                        QuoteToSalesOrderWizardModuleQuoteDetails,\n                        [\n                            OrderWizardModuleCartSummary,\n                            {\n                                container: '#wizard-step-content-right',\n                                warningMessage: Utils.translate(\n                                    'Total may include handling costs not displayed in the summary breakdown'\n                                )\n                            }\n                        ],\n                        [\n                            OrderWizardModuleTermsAndConditions,\n                            {\n                                container: '#wizard-step-content-right',\n                                showWrapper: true,\n                                wrapperClass: 'order-wizard-termsandconditions-module-top-summary'\n                            }\n                        ],\n                        [\n                            OrderWizardModuleTermsAndConditions,\n                            {\n                                container: '#wizard-step-content-right',\n                                showWrapper: true,\n                                wrapperClass: 'order-wizard-termsandconditions-module-bottom'\n                            }\n                        ],\n                        [\n                            OrderWizardModuleSubmitButton,\n                            {\n                                container: '#wizard-step-content-right',\n                                showWrapper: true,\n                                wrapperClass: 'order-wizard-submitbutton-container'\n                            }\n                        ],\n                        [\n                            QuoteToSalesOrderWizardModulePaymentMethodSelector,\n                            {\n                                record_type: 'salesorder',\n                                modules: [\n                                    {\n                                        classModule: OrderWizardModulePaymentMethodCreditcard,\n                                        name: Utils.translate('Credit / Debit Card'),\n                                        type: 'creditcard',\n                                        options: {}\n                                    },\n                                    {\n                                        classModule: OrderWizardModulePaymentMethodInvoice,\n                                        name: Utils.translate('Invoice'),\n                                        type: 'invoice',\n                                        options: {}\n                                    }\n                                ]\n                            }\n                        ],\n                        [\n                            QuoteToSalesOrderModuleAddressBilling,\n                            {\n                                title: Utils.translate('Billing Address')\n                            }\n                        ],\n                        [\n                            OrderWizardModuleShowShipments,\n                            {\n                                hide_edit_cart_button: true,\n                                hide_edit_address_button: true\n                            }\n                        ],\n                        [\n                            OrderWizardModuleTermsAndConditions,\n                            {\n                                showWrapper: true,\n                                wrapperClass: 'order-wizard-termsandconditions-module-default'\n                            }\n                        ]\n                    ],\n                    save: function() {\n                        const first_module_instance: any = _.first(this.moduleInstances);\n                        first_module_instance.trigger(\n                            'change_label_continue',\n                            Utils.translate('Processing...')\n                        );\n                        const orderSubmission = jQuery.Deferred();\n                        return this.wizard.model\n                            .submit()\n                            .then(salesOrder => {\n                                const confirmation = this.wizard.model.get('confirmation');\n                                if (SC.CONFIGURATION.isThreeDSecureEnabled) {\n                                    if (isPaymentAuthenticationRequired(confirmation)) {\n                                        new QuoteToSalesOrderWizardThreeDSecure({\n                                            layout: this.wizard.application.getLayout(),\n                                            application: this.wizard.application,\n                                            wizard: this.wizard,\n                                            deferred: orderSubmission,\n                                            confirmation: confirmation\n                                        }).showInModal();\n                                    } else {\n                                        orderSubmission.rejectWith(this.wizard);\n                                    }\n                                    return orderSubmission;\n                                }\n                                if (\n                                    salesOrder.confirmation &&\n                                    salesOrder.confirmation.statuscode === 'redirect'\n                                ) {\n                                    window.location.href = Utils.addParamsToUrl(\n                                        salesOrder.confirmation.redirecturl,\n                                        {\n                                            touchpoint: Configuration.get('currentTouchpoint')\n                                        }\n                                    );\n                                    return orderSubmission.reject();\n                                }\n\n                                first_module_instance.trigger(\n                                    'change_label_continue',\n                                    Utils.translate('Placed Order')\n                                );\n\n                                return orderSubmission.resolve();\n                            })\n                            .fail(error => {\n                                first_module_instance.trigger(\n                                    'change_label_continue',\n                                    Utils.translate('Submit')\n                                );\n                                return orderSubmission.reject(error);\n                            });\n                    }\n                }\n            ]\n        },\n        {\n            steps: [\n                {\n                    url: 'quotetosalesorder-confirmation',\n                    hideContinueButton: true,\n                    name: Utils.translate('Thank you'),\n                    hideBackButton: true,\n                    hideBreadcrumb: true,\n                    headerView: HeaderView,\n                    modules: [\n                        [\n                            OrderWizardModuleCartSummary,\n                            {\n                                container: '#wizard-step-content-right',\n                                warningMessage: Utils.translate(\n                                    'Total may include handling costs not displayed in the summary breakdown'\n                                )\n                            }\n                        ],\n                        QuoteToSalesOrderWizardModuleConfirmation,\n                        QuoteToSalesOrderWizardModuleQuoteDetails,\n                        [OrderWizardModuleShowPayments],\n                        [\n                            OrderWizardModuleShowShipments,\n                            {\n                                hide_edit_cart_button: true,\n                                hide_edit_address_button: true\n                            }\n                        ]\n                    ]\n                }\n            ]\n        }\n    ]\n};\n"]}